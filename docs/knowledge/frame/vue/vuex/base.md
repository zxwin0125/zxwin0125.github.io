---
title: Vuex 核心概念和基本使用
order: 2
---

## 简易的状态管理方案

<!-- - 如果多个组件之间需要共享状态，使用之前的方式虽然都可以实现，但是比较麻烦，而且多个组件之间互相传值，很难跟踪到数据的变化，如果出现问题的话，很难定位问题
- 当遇到多个组件需要共享状态的时候（典型的场景如购物车），使用之前的组件通信方式都不合适，会遇到以下的问题
  - 多个视图依赖于同一状态
    - 如果多层嵌套的组件依赖于同一状态，使用父子组件传值可以实现，但是非常的麻烦，而且不易管理
  - 来自不同视图的行为需要变更统一状态
    我们可以使用父子组件的方式获取状态
进行修改
或者通过事件机制来改变或者同步状态的变化
以上这些方式非常的脆弱
通常会导致无法维护的代码
那为了解决这些问题
我们可以把不同组件之间的共享状态抽取出来
存储到一个全局对象中
并且将来使用的时候要保证它是响应式的
这个对象创建好之后
我们的任何组件都可以获取或修改
全局对象中的状态
下面我们就来演示一下
这种简单的可以让多个组件共享状态的方案
我们可以把多个组件的状态
或者整个程序的状态放到一个集中的位置存储
并且可以检测到数据的更改
你可能已经想到了VX
这里我们先不使用VX
我们先自己来进行一个简单的实现
我们先打开vs code来演示一下
实现好的代码
打开零五杠EASISTOR中的STO点
JS这个模块中我们导出了一个对象
这个对象就是我们的store
或者我们叫做状态仓库
它里面有状态
还有action
状态是用来存储数据
action是通过视图和用户交互的时候
用来更改状态用的
这里还有一个debug的属性
他的目的是为了方便调试
如果为true的话
在通过action修改数据的时候会打印日志
这是集中式的状态管理
我们所有的状态都在store中进行管理
并且我们store是全局唯一的对象
任意的组件都可以导入storm模块
使用其中的状态
更改状态也是在该模块中实现的
再通过特殊的手段
还可以自己记录每次状态的变换
我们再来看这个全局的store是如何使用的
我们打开component a
它里边首先需要导入store
然后把操中的state
也就是共享的状态存储到当前组件的shared state中
当然当前组件还可以有自己特有的状态
我们存储在private state中
在视图中可以直接通过shared state username来显示数据
当点击按钮的时候
调用store中的action修改内部属性的值为component a
再来看component b
这里面代码跟component a中的是一样的
只是调用action修改名字的时候改成了component b
注意这里ab组件中
都访问了store中存储的状态数据
当前component a和component b两个组件
共享了store中的状态
并且和用户交互的时候
还会更改状态中的name属性
那下面我们打开浏览器来测试一下
我们找到简易的状态管理的这个位置
点击A组件的按钮
此时name属性被改为了component
a ab组件中的name属性都发生了变化
我们再点击B组件的按钮
效果跟刚刚是一样的
这里我们采用了集中式的状态管理
使用了全局唯一的对象store来存储状态
并且我们有一个共同的约定
组件不允许直接更改套对象的state状态属性
如果想要改变state
需要调用action来改变store中的状态
最终的结果跟view x中很类似
我们这样约定的好处是
能够记录所有store中发生的state的变更
当能记录死套的变更之后
就可以实现高级的调试功能
例如time travel就是时光旅行
还有历史回滚功能
后边在使用VIVX的时候
我们会演示好到这里
这个简易的状态管理我们就演示完了
它跟我们VOX的使用方式很像
那稍后我们就开始来回顾VX -->

## Vuex
