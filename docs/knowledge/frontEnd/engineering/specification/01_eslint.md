<!-- - 前端规范化的考虑，以及最终结果产出
- ESLint9 从零到一，从基础 js 到 ts 再到框架的完整体系
- ESLint9 完备体系的微内核/插件化设计思想浅析
- 前端工具链畅想，基于 oxc 新生代体系架构与建设 -->

<!-- - 理解项目规范化在团队合作中的作用和价值。
- 熟悉 ESLint 9 在 JavaScript 项目中的基本使用和配置方式。
- 掌握 ESLint 核心规则的含义及其在实际项目中的应用。
- 深入了解 ESLint 在自动化、CI/CD 流程中的应用，以确保高效的代码管理和团队协作。 -->

# 基于 ESLint 9 前端工程规范化最佳实践

## 项目里有考虑过规范化相关内容吗？除了 ESLint 还有没有什么其他方案？

### 怎么理解项目规范化？

项目规范化就是在团队开发过程中，按照一样的技术、编码风格、目录结构和代码质量标准

规范化的核心目标
- 尽可能提高项目的可维护性、一致性和可读性
- 尽可能减少团队成员之间因为代码风格或规则不统一而产生的沟通成本

提升代码质量的同时，有助于减少项目的复杂性，提升协作效率

### 规范化的层面

项目规范化不仅仅体现在代码层面，还包括多个方面

- **文件结构**：合理的项目目录和文件组织方式，确保每个模块都能快速定位

- **命名规则**：统一的变量、函数、文件命名规范，确保代码清晰，容易理解

- **提交规范**：代码提交时的格式要求，包括提交信息的规范化，以便团队成员快速了解每次提交的目的和内容

### JavaScript 代码规范化

#### 什么是 ESLint？

> [!info]
> ESLint 是一款 JavaScript 和 TypeScript 的代码质量检查工具，帮助开发者确保代码在语法、逻辑、风格等方面符合既定的规则
> 
> 它为项目提供灵活的配置，适应不同团队的需求

#### 为什么要使用 ESLint？

ESLint 主要作用是及时发现潜在的代码错误，提升代码质量

通过对代码风格的统一，ESLint 还能够减少团队成员之间的沟通成本和开发冲突

#### ESLint 的核心原理

ESLint 通过抽象语法树（AST）分析代码

它将代码转换为一个树状结构，通过分析树的节点，识别出不符合规则的部分

这种基于结构化数据的检查方式使得 ESLint 能够精确地检查代码的各个细节

### ESLint 规则约定

#### 规则的三种级别

- **off**：关闭规则，ESLint 不会进行任何检查

- **warn**：警告级别，违反规则时会显示警告，但不会阻止代码运行
  
- **error**：错误级别，违反规则时会报错，常用于团队必须遵循的规范

#### 核心规则讲解

- **语法检查**：确保代码符合语法规范，如禁止使用未定义的变量或重复声明变量

- **风格一致性**：确保代码风格统一，如强制使用分号、统一的空格和缩进规则

- **最佳实践**：如禁止使用`eval()`函数，避免原型污染等，以减少潜在的安全隐患

#### 常用规则的意义

例如，`no-unused-vars`规则能够帮助减少冗余代码，而`eqeqeq`规则要求使用全等运算符（===）来避免隐式类型转换问题

根据项目的实际需求，可以进一步定制 ESLint 规则

### 团队协作与代码风格统一

#### ESLint 与 Prettier 的集成

ESLint 专注于代码的语法和逻辑检查，而 Prettier 专注于代码的格式化。通过将 ESLint 和 Prettier 结合使用，团队可以确保代码在功能和风格上的一致性，从而减少不必要的团队冲突。

#### 代码风格统一的益处
通过自动化的代码风格统一，团队成员无需为代码格式进行争论，PR 审查更加高效，开发者可以将精力集中在业务逻辑和架构优化上。

### 实际项目中的 ESLint 实践
#### 规则集选择
在实际项目中，团队可以根据项目规模和成员数量选择合适的规则集。对于大型项目，可以使用像 Airbnb 这样的严格规则集，而小型项目可以使用 ESLint 推荐的灵活配置。

#### 大型团队的 ESLint 配置技巧
在大型项目中，可能涉及多个子项目或模块。通过`overrides`选项，可以为不同模块配置不同的规则。例如，可以为后端模块允许`console.log`，而前端模块则禁用此规则，确保一致性。

### 自动化与 ESLint 的集成
#### Git Hooks
通过 husky 和 lint - staged，可以在每次 Git 提交之前检查代码，确保不符合规范的代码不会被提交。这为团队提供了一道额外的质量保障。

#### CI/CD 集成
在 CI/CD 流程中集成 ESLint，确保每次代码合并时都能符合项目规范，从而有效减少代码审查的复杂度和时间成本。

#### 自动化的价值
自动化 ESLint 检查不仅减少了人为疏忽的可能性，还提高了项目的一致性，避免了代码风格和逻辑不统一的问题。

### 团队项目规范化推进细节
#### 最佳实践
在项目中逐步引入 ESLint 规范，从宽松到严格的过渡，避免团队成员产生抵触情绪。建议先让团队熟悉核心规则，再逐步加强规则的严格程度。

#### 常见问题和解决方法
例如，团队成员对代码风格存在分歧时，可以利用 Prettier 和 ESLint 来统一风格，从而减少人为的干预和摩擦。

### 其他代码质量检查工具与方案
#### oxlint
oxlint 是一种用于 JavaScript 和 TypeScript 项目的静态代码分析工具，旨在提高代码质量和一致性。它类似于 ESLint，但在某些功能和配置上有所不同。oxlint 以轻量级、高效和高自定义为特点，适合那些需要细致控制和优化的项目。

**特点与优势**：
- **高效**：相比一些更为复杂的工具，oxlint 更加轻量，运行速度较快。
- **简化配置**：提供了简洁的配置方式，使得项目能够快速上手。
- **细致的规则管理**：支持对不同模块和文件进行单独配置，避免一刀切的规则。
- **集成能力**：与其他工具如 Prettier、Husky、CI/CD 管道等有很好的兼容性，能够实现自动化代码检查。

**使用场景**：适合中小型项目，尤其是在需要快速定制规则或快速集成的环境中，oxlint 提供了一个灵活且高效的解决方案。

#### Prettier
Prettier 主要侧重于代码格式化，而非语法和逻辑检查。它是一个用于自动化代码格式化的工具，支持多种编程语言，包括 JavaScript、TypeScript、HTML、CSS 等。Prettier 可以与 ESLint 集成，确保代码风格的一致性，并避免手动修复格式问题。

**特点与优势**：
- **自动化格式化**：可以自动调整代码格式，确保符合统一的风格标准。
- **支持多种语言**：不仅支持 JavaScript 和 TypeScript，还支持 HTML、CSS、JSON、Markdown 等多种语言的格式化。
- **无配置化**：默认配置即可使用，不需要繁琐的设置。

**使用场景**：Prettier 适合与 ESLint 一起使用，专注于代码的格式化部分，减轻了团队在格式统一上的负担。 